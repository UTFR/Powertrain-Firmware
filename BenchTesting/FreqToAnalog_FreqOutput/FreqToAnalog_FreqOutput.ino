// This code for simulating frequency signals generated by flow rate sensors/ hall effect sensors
// Runs on any Arduino

#define HW_PIN_FREQ_OUT 3
#define frequency 250       // Hz

int delay_t;

int freqToDelay(int freq){
  return round(1000000/freq);
}

void setup() {
  
  pinMode(HW_PIN_FREQ_OUT, OUTPUT);
  delay_t = freqToDelay(frequency);
  
  Serial.begin(9600);
  Serial.println(delay_t);
  
}

void loop() {
  
  digitalWrite(HW_PIN_FREQ_OUT, LOW);       // Currently outputting spikes
  delayMicroseconds(round(delay_t/2));             // To output square wave (ish) put delay(delay_t/2) after both digitalWrites
  digitalWrite(HW_PIN_FREQ_OUT, HIGH);   
  delayMicroseconds(round(delay_t/2)); 
  
}
